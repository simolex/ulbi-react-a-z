{"version":3,"sources":["components/UI/modal/UiModal.module.css","components/UI/pagination/UiPagination.module.css","components/UI/input/UiInput.module.css","components/UI/button/UiButton.module.css","components/UI/loader/UiLoader.module.css","API/PostService.js","components/UI/input/UiInput.jsx","components/UI/select/UiSelect.jsx","components/PostFilter.jsx","components/UI/button/UiButton.jsx","components/PostForm.jsx","components/PostItem.jsx","components/PostList.jsx","components/UI/loader/UiLoader.jsx","components/UI/modal/UiModal.jsx","utils/pages.js","components/UI/pagination/UiPagination.jsx","hooks/usePosts.js","App.js","hooks/useFetching.js","index.js"],"names":["module","exports","PostService","limit","page","axios","get","params","_limit","_page","response","UiInput","React","forwardRef","props","ref","className","classes","uiInput","UiSelect","options","defaultValue","value","onChange","e","target","disabled","map","option","name","PostFilter","filter","setFilter","query","placeholder","sort","selestedSort","UiButton","children","uiBtn","PostForm","create","useState","title","body","post","setPost","type","onClick","preventDefault","newPost","id","Date","now","PostItem","number","remove","PostList","posts","length","style","textAlign","TransitionGroup","index","CSSTransition","timeout","classNames","UiLoader","loader","UiModal","visible","setVisible","rootClasses","uiModal","push","active","join","uiModalContent","stopPropagation","getPageCount","totalPages","Math","ceil","UiPagination","changePage","pagesArray","i","getPagesArray","defaultClasses","currentClasses","page__current","page__wrapper","p","usePosts","sortedPosts","useMemo","a","b","localeCompare","useSortedPosts","toLowerCase","includes","App","setPosts","modal","setModal","setTotalPages","setPage","sortedAndSearchedPosts","callback","isLoading","setIsLoading","error","setError","fetching","message","useFetching","getAll","resp","data","totalCount","headers","fetchPosts","isPostsLoading","postError","useEffect","marginTop","margin","display","justifyContent","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.43df8815.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"uiModal\":\"UiModal_uiModal__10Dt5\",\"uiModalContent\":\"UiModal_uiModalContent__3Orbb\",\"active\":\"UiModal_active__9U5B9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page__wrapper\":\"UiPagination_page__wrapper__2Kjyh\",\"page\":\"UiPagination_page__12JjC\",\"page__current\":\"UiPagination_page__current__1cRi0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"uiInput\":\"UiInput_uiInput__2dFz6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"uiBtn\":\"UiButton_uiBtn__2kfzK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"UiLoader_loader__1JYFW\",\"rotateLoader\":\"UiLoader_rotateLoader__2T0zw\"};","import axios from \"axios\";\r\n\r\nexport default class PostService {\r\n  static async getAll(limit = 10, page = 1) {\r\n    const response = await axios.get(\"https://jsonplaceholder.typicode.com/posts\", {\r\n      params: {\r\n        _limit: limit,\r\n        _page: page,\r\n      },\r\n    });\r\n    return response;\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport classes from \"./UiInput.module.css\";\r\n\r\nconst UiInput = React.forwardRef((props, ref) => {\r\n  return <input ref={ref} {...props} className={classes.uiInput} />;\r\n});\r\n\r\nexport default UiInput;\r\n","import React from \"react\";\r\n\r\nconst UiSelect = ({ options, defaultValue, value, onChange }) => {\r\n  return (\r\n    <select value={value} onChange={(e) => onChange(e.target.value)}>\r\n      <option value=\"\" disabled>\r\n        {defaultValue}\r\n      </option>\r\n      {options.map((option) => (\r\n        <option key={option.value} value={option.value}>\r\n          {option.name}\r\n        </option>\r\n      ))}\r\n    </select>\r\n  );\r\n};\r\n\r\nexport default UiSelect;\r\n","import React from \"react\";\r\nimport UiInput from \"./UI/input/UiInput\";\r\nimport UiSelect from \"./UI/select/UiSelect\";\r\n\r\nconst PostFilter = ({ filter, setFilter }) => {\r\n  return (\r\n    <div>\r\n      <UiInput\r\n        value={filter.query}\r\n        onChange={(e) => setFilter({ ...filter, query: e.target.value })}\r\n        placeholder=\"Поиск...\"\r\n      />\r\n      <UiSelect\r\n        value={filter.sort}\r\n        onChange={(selestedSort) => setFilter({ ...filter, sort: selestedSort })}\r\n        defaultValue=\"Сортировка\"\r\n        options={[\r\n          { value: \"title\", name: \"По наименованию\" },\r\n          { value: \"body\", name: \"По описанию\" },\r\n        ]}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PostFilter;\r\n","import React from \"react\";\r\nimport classes from \"./UiButton.module.css\";\r\n\r\nconst UiButton = ({ children, ...props }) => {\r\n  return (\r\n    <button className={classes.uiBtn} {...props}>\r\n      {children}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default UiButton;\r\n","import React, { useState } from \"react\";\r\nimport UiButton from \"./UI/button/UiButton\";\r\nimport UiInput from \"./UI/input/UiInput\";\r\n\r\nconst PostForm = ({ create }) => {\r\n  const [post, setPost] = useState({ title: \"\", body: \"\" });\r\n  const AddNewPost = (e) => {\r\n    e.preventDefault();\r\n    const newPost = {\r\n      id: Date.now(),\r\n      ...post,\r\n    };\r\n    create(newPost);\r\n    setPost({ title: \"\", body: \"\" });\r\n    // console.log(bodyInputRef.current.value);\r\n  };\r\n  // const bodyInputRef = useRef();\r\n  return (\r\n    <form>\r\n      {/* Управляемый компонент */}\r\n      <UiInput\r\n        value={post.title}\r\n        onChange={(e) => setPost({ ...post, title: e.target.value })}\r\n        type=\"text\"\r\n        placeholder=\"Название поста\"\r\n      />\r\n      {/* ./Управляемый компонент */}\r\n\r\n      <UiInput\r\n        value={post.body}\r\n        onChange={(e) => setPost({ ...post, body: e.target.value })}\r\n        type=\"text\"\r\n        placeholder=\"Описание поста\"\r\n      />\r\n\r\n      {/* Неуправляемый\\ Неконтролируемый компонент */}\r\n      {/* <UiInput ref={bodyInputRef} type=\"text\" placeholder=\"Описание поста\" /> */}\r\n      {/* ./Неуправляемый\\ Неконтролируемый компонент */}\r\n\r\n      <UiButton onClick={AddNewPost}>Создать пост</UiButton>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PostForm;\r\n","import React from \"react\";\r\nimport UiButton from \"./UI/button/UiButton\";\r\n\r\nconst PostItem = ({ number, post, remove }) => {\r\n  return (\r\n    <div className=\"post\">\r\n      <div className=\"post__content\">\r\n        <strong>\r\n          {number}. {post.title}\r\n        </strong>\r\n        <div>{post.body}</div>\r\n      </div>\r\n      <div className=\"post__btns\">\r\n        <UiButton onClick={() => remove(post)}> Удалить</UiButton>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PostItem;\r\n","import React from \"react\";\r\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\r\nimport PostItem from \"./PostItem\";\r\n\r\nconst PostList = ({ posts, title, remove }) => {\r\n  if (!posts.length) {\r\n    return <h1 style={{ textAlign: \"center\" }}>Посты отсутствуют!</h1>;\r\n  }\r\n  return (\r\n    <div>\r\n      <h1 style={{ textAlign: \"center\" }}>{title}</h1>\r\n      <TransitionGroup>\r\n        {posts.map((post, index) => (\r\n          <CSSTransition key={post.id} timeout={500} classNames=\"post\">\r\n            <PostItem remove={remove} number={post.id} post={post} />\r\n          </CSSTransition>\r\n        ))}\r\n      </TransitionGroup>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PostList;\r\n","import React from \"react\";\r\n\r\nimport classes from \"./UiLoader.module.css\";\r\n\r\nconst UiLoader = () => {\r\n  return <div className={classes.loader}></div>;\r\n};\r\n\r\nexport default UiLoader;\r\n","import React from \"react\";\r\nimport classes from \"./UiModal.module.css\";\r\n\r\nconst UiModal = ({ children, visible, setVisible }) => {\r\n  const rootClasses = [classes.uiModal];\r\n  if (visible) {\r\n    rootClasses.push(classes.active);\r\n  }\r\n  return (\r\n    <div className={rootClasses.join(\" \")} onClick={() => setVisible(false)}>\r\n      <div className={classes.uiModalContent} onClick={(e) => e.stopPropagation()}>\r\n        {children}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UiModal;\r\n","export const getPageCount = (totalPages, limit) => {\r\n  return Math.ceil(totalPages / limit);\r\n};\r\n\r\nexport const getPagesArray = (totalPages) => {\r\n  // TODO: useMemo\r\n  const pagesArray = [];\r\n  for (let i = 0; i < totalPages; i++) {\r\n    pagesArray.push(i + 1);\r\n  }\r\n  return pagesArray;\r\n};\r\n","import React from \"react\";\r\nimport { getPagesArray } from \"../../../utils/pages\";\r\nimport classes from \"./UiPagination.module.css\";\r\n\r\nconst UiPagination = ({ totalPages, page, changePage }) => {\r\n  // TODO: useMemo\r\n  let pagesArray = getPagesArray(totalPages);\r\n\r\n  const defaultClasses = classes.page;\r\n  const currentClasses = [defaultClasses, classes.page__current].join(\" \");\r\n\r\n  return (\r\n    <div className={classes.page__wrapper}>\r\n      {pagesArray.map((p) => (\r\n        <span\r\n          onClick={() => {\r\n            changePage(p);\r\n          }}\r\n          key={p}\r\n          className={page === p ? currentClasses : defaultClasses}\r\n        >\r\n          {p}\r\n        </span>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UiPagination;\r\n","import { useMemo } from \"react\";\r\n\r\nexport const useSortedPosts = (posts, sort) => {\r\n  const sortedPosts = useMemo(() => {\r\n    if (sort) {\r\n      return [...posts].sort((a, b) => a[sort].localeCompare(b[sort]));\r\n    }\r\n    return posts;\r\n  }, [sort, posts]);\r\n\r\n  return sortedPosts;\r\n};\r\n\r\nexport const usePosts = ({ posts, sort, query }) => {\r\n  const sortedPosts = useSortedPosts(posts, sort);\r\n  const sortedAndSearchedPosts = useMemo(() => {\r\n    return sortedPosts.filter((post) => post.title.toLowerCase().includes(query.toLowerCase()));\r\n  }, [query, sortedPosts]);\r\n  return sortedAndSearchedPosts;\r\n};\r\n","import React, { useEffect, useState } from \"react\";\r\nimport PostService from \"./API/PostService\";\r\n// import { createPortal } from \"react-dom\";\r\nimport PostFilter from \"./components/PostFilter\";\r\nimport PostForm from \"./components/PostForm\";\r\nimport PostList from \"./components/PostList\";\r\nimport UiButton from \"./components/UI/button/UiButton\";\r\nimport UiLoader from \"./components/UI/loader/UiLoader\";\r\nimport UiModal from \"./components/UI/modal/UiModal\";\r\nimport UiPagination from \"./components/UI/pagination/UiPagination\";\r\nimport { useFetching } from \"./hooks/useFetching\";\r\nimport { usePosts } from \"./hooks/usePosts\";\r\nimport \"./styles/App.css\";\r\nimport { getPageCount } from \"./utils/pages\";\r\n\r\nfunction App() {\r\n  const [posts, setPosts] = useState([]);\r\n  const [filter, setFilter] = useState({ sort: \"\", query: \"\" });\r\n  const [modal, setModal] = useState(false);\r\n  const [totalPages, setTotalPages] = useState(0);\r\n  const [limit, setLimit] = useState(10);\r\n  const [page, setPage] = useState(1);\r\n  const sortedAndSearchedPosts = usePosts({ posts, sort: filter.sort, query: filter.query });\r\n\r\n  const [fetchPosts, isPostsLoading, postError] = useFetching(async (limit, page) => {\r\n    const resp = await PostService.getAll(limit, page);\r\n    setPosts(resp.data);\r\n    const totalCount = resp.headers[\"x-total-count\"];\r\n    setTotalPages(getPageCount(totalCount, limit));\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchPosts(limit, page);\r\n  }, []);\r\n\r\n  const createPost = (newPost) => {\r\n    setPosts([...posts, newPost]);\r\n    setModal(false);\r\n  };\r\n\r\n  const removePost = (post) => {\r\n    setPosts(posts.filter((p) => p.id !== post.id));\r\n  };\r\n\r\n  const changePage = (page) => {\r\n    setPage(page);\r\n    fetchPosts(limit, page);\r\n  };\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <UiButton style={{ marginTop: \"30px\" }} onClick={() => setModal(true)}>\r\n        Создать пост\r\n      </UiButton>\r\n      <UiModal visible={modal} setVisible={setModal}>\r\n        <PostForm create={createPost} />\r\n      </UiModal>\r\n      <hr style={{ margin: \"15px 0\" }} />\r\n      <PostFilter filter={filter} setFilter={setFilter} />\r\n      {postError && <h1>Произошла ошибка: {postError}</h1>}\r\n      {isPostsLoading ? (\r\n        <div style={{ display: \"flex\", justifyContent: \"center\", marginTop: \"50px\" }}>\r\n          <UiLoader />\r\n        </div>\r\n      ) : (\r\n        <PostList\r\n          remove={removePost}\r\n          posts={sortedAndSearchedPosts}\r\n          title={\"Список постов про JS\"}\r\n        />\r\n      )}\r\n      <UiPagination page={page} changePage={changePage} totalPages={totalPages} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { useState } from \"react\";\r\n\r\nexport const useFetching = (callback) => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const fetching = async (...args) => {\r\n    try {\r\n      setIsLoading(true);\r\n      await callback(...args);\r\n    } catch (err) {\r\n      setError(err.message);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n  return [fetching, isLoading, error];\r\n};\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}